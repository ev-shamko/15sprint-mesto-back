Проектная работа №15
=====
### Cервер на express для сервиса Mesto с подключённой mongoDB. Подготовка к деплою.

#### Ссылки:
* http://84.201.149.81:3000/
* http://mesto-nodeapp.tk и http://www.mesto-nodeapp.tk
* https://mesto-nodeapp.tk и https://www.mesto-nodeapp.tk

Проверка актуальности ssl-сертификата: https://www.sslshopper.com/ssl-checker.html#hostname=mesto-nodeapp.tk

Веб-версия мониторинга работы сервера от pm2-менеджера:
(вход только по логину-паролю разработчика): https://app.pm2.io/bucket/5f275b28b527dc6f704eff10/backend/overview/servers

02 октября 2020 года ссылки на сервис перестанут работать, т.к. виртуальная машина будет выключена.
Домен mesto-nodeapp.tk: бесплатный период до 02 августа 2021.


#### Используемые технологии:
Node.js, express, MongoDB, Mongoose, Joi, Celebrate, JWT, pm2

#### Как запустить локально:
1.	Клонируйте репозиторий
2.	$ npm i
3.	Проверьте, установлена ли у вас MongoDB
4.	Запустите локальный сервер одной из этих команд:
```
$ npm run start
$ npm run dev      (тут будет hot reload)
```

#### Как запустить на сервере, например на Ubuntu:
1. Установите: Node 12.x, Mongo 
2. Запустите Mongo и настройте его автозапуск
3. Установите GIT и спуллите этот репозиторий. Переключитесь на ту ветку, с которой хотите работать.
4. npm install   (в папке с репозиторием)
5. npm start       ---> или передайте выполнение и перезапуск app.js какому-нибудь менеджеру типа pm2

#### Тестируйте запросы к серверу через Postman по указанным выше адресам.
Например, создать пользователя вы можете так:

```
POST https://mesto-nodeapp.tk/signup
{
    "name": "Test User",
    "about": "i'm a test user",
    "avatar": "https://my.site/ava11.jpg",
    "email": "12345@yandex.ru",
    "password": "12345678"
}
```


#### Что умеет сервер:

#### v.0.0.4

* это Node.js приложение подключается к серверу Mongo по адресу mongodb://localhost:27017/mestodb Поднимать сервер $ mongod необходимо самостоятельно (локально или на сервере).
* в приложении реализована авторизация через получениу JWT токена
* приложение умеет отправлять и читать куки (JWT). Без наличия куки, получаемых при авторизации, вы не сможете использовать все потрясающие возожности нашего великолепного сервиса и полноценно взаимодействовать с базой данных :)
* Реализована централизованная обработка ошибок с помощью конструкторов ошибок
* Запросы к серверу и базе данных валидируются с помощью Joi и Celebrate

* можно взаимодействовать с коллекцией users в вашей локальной бд по роуту https://mesto-nodeapp.tk/users
```
- создать нового пользователя в бд или залогиниться через POST .../ (требуется корректный req.body)
- получить полный список юзеров: GET .../users
- получить информацию о конкретном юзере по его _id через GET .../users/_id
```

* можно взаимодействовать с коллекцией cards в бд, но только если вы залогинены (и есть куки), по роуту https://mesto-nodeapp.tk/cards
```
- получить полный список карточек: GET .../cards
- добавить новую карточку (Mesto .place_card) в бд через POST-запрос (требуется корректный req.body)
- удалить карточку по её _id через DELETE-запрос на адрес .../cards/_id - но только если вы сами создали эту карточку
```


* GET https://mesto-nodeapp.tk – в этой итерации фронтенд не подключён, вернётся ответ 404
* на неожиданные GET-запросы по адресу https://mesto-nodeapp.tk/* также вернётся ответ 404


#### Если WTF:
Если файлы как-то капитально не читаются, проверьте окончание строк: CRLF/LF. Но по умолчанию git конвертирует окончание строк для вашей операционной системы.
